# MongoDB 3.6-4.0 Configuration
# Generated by mup

net:
  port: {{ .Net.Port }}
  bindIp: {{ .Net.BindIP }}
{{- if .Net.TLS }}
  # MongoDB 3.6-4.0 uses 'ssl' naming
  ssl:
    mode: {{ .Net.TLS.Mode }}
{{- if .Net.TLS.CertificateKeyFile }}
    PEMKeyFile: {{ .Net.TLS.CertificateKeyFile }}
{{- end }}
{{- if .Net.TLS.CAFile }}
    CAFile: {{ .Net.TLS.CAFile }}
{{- end }}
{{- end }}

storage:
  dbPath: {{ .Storage.DBPath }}
  journal:
    enabled: {{ .Storage.Journal.Enabled }}
{{- if .Storage.Engine }}
  engine: {{ .Storage.Engine }}
{{- end }}
{{- if .Storage.WiredTiger }}
  wiredTiger:
    engineConfig:
      cacheSizeGB: {{ .Storage.WiredTiger.EngineConfig.CacheSizeGB }}
{{- end }}

systemLog:
  destination: {{ .SystemLog.Destination }}
{{- if .SystemLog.Path }}
  path: {{ .SystemLog.Path }}
{{- end }}
  logAppend: {{ .SystemLog.LogAppend }}

processManagement:
{{- if .ProcessManagement.Fork }}
  fork: {{ .ProcessManagement.Fork }}
{{- end }}
{{- if .ProcessManagement.PIDFilePath }}
  pidFilePath: {{ .ProcessManagement.PIDFilePath }}
{{- end }}

{{- if .Replication }}
replication:
  replSetName: {{ .Replication.ReplSetName }}
{{- if .Replication.OplogSizeMB }}
  oplogSizeMB: {{ .Replication.OplogSizeMB }}
{{- end }}
{{- end }}

{{- if .Sharding }}
sharding:
  clusterRole: {{ .Sharding.ClusterRole }}
{{- end }}

{{- if .Security }}
security:
  authorization: {{ .Security.Authorization }}
{{- if .Security.KeyFile }}
  keyFile: {{ .Security.KeyFile }}
{{- end }}
{{- end }}
